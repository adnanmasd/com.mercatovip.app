<!DOCTYPE html><html><head><meta http-equiv="content-security-policy" content="default-src *; script-src &apos;self&apos; data: &apos;unsafe-inline&apos; &apos;unsafe-eval&apos; http://127.0.0.1:8081 http://192.168.8.120:8081; object-src &apos;self&apos; data: http://127.0.0.1:8081 http://192.168.8.120:8081; style-src &apos;self&apos; &apos;unsafe-inline&apos; data: ; img-src *; media-src &apos;self&apos; data: http://127.0.0.1:8081 http://192.168.8.120:8081; frame-src &apos;self&apos; data: http://127.0.0.1:8081 http://192.168.8.120:8081; font-src *; connect-src &apos;self&apos; data: http://127.0.0.1:8081 http://192.168.8.120:8081">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <title>Device Router</title>

    <style>
        html {
            background: #DDD;
            font-size: 14px;
            color: #222;
            font-family: Arial, sans-serif;
        }

        html, body {
            padding: 0;
            margin: 0;
        }

        html * {
            box-sizing: border-box;
        }

        #unavailable {
            display: block;
        }

        #unavailable p {
            display: none;
            font-size: 15px;
            background: #444;
            color: #FFF;
            padding: 20px;
            margin: 10px;
            border-radius: 10px;
            line-height: 24px;
        }

        #status_text {
            display: block;

            background: #2196F3;
            color: #FFF;
            padding: 20px;
            margin: 10px;

            -webkit-border-radius: 10px;
            -moz-border-radius: 10px;
            border-radius: 10px;
        }

        input {
            display: block;
            background: #FFF;
            border: 1px solid #CCCCCC;
            font-size: 14px;
            color: #222;
            width: 100%;
            height: 46px;
            padding: 10px;
        }

        button {
            display: block;
            margin-top: 10px;
            width: 100%;
            height: 34px;
        }

        .input_wrap {
            padding: 0 10px;
        }
    </style>

</head>
<body><script>const localServerIp = '192.168.8.120'</script>

<div id="unavailable">
    <p>
        It seems we can&apos;t connect to<br>127.0.0.1:8081<br>
        <script>document.write(localServerIp)</script>
        :8081<br><br>
        You can test yourself with next inputs:
    </p>

    <div id="status_text">
        Waiting for device ready...
    </div>

    <div class="input_wrap">
        <input type="text" placeholder="Server Ip:Port (like 192.168.0.2:8081)" disabled>
    </div>

    <div class="input_wrap">
        <button type="button" onclick="tryConnect()" disabled>Connect</button>
    </div>
</div>

<script>
    var deviceReadyChecker = setTimeout(startRedirectChecks, 5000);

    document.addEventListener("deviceready", function () {
        clearTimeout(deviceReadyChecker);

        if (typeof navigator.splashscreen !== "undefined" && typeof navigator.splashscreen.hide === "function")
            navigator.splashscreen.hide();

        startRedirectChecks();
    });

    function startRedirectChecks() {
        testConnection('127.0.0.1:8081', goUrl, function () {
            testConnection(localServerIp + ':8081', goUrl, ajaxErr)
        })
    }

    function tryConnect() {
        var ipTest = /^([0-9]{1,3}\.){3}[0-9]{1,3}(:[0-9]{1,6})?$/,
            ipPort = document.querySelector("input").value;

        if (ipTest.test(ipPort))
            testConnection(ipPort, goUrl, ajaxErr);
    }

    function testConnection(ipPort, callback, errCallback) {
        var xhr = new XMLHttpRequest();

        document.querySelector("button").disabled = true;
        document.querySelector("input").disabled = true;
        document.querySelector("#status_text").innerText = "Trying to connect http://" + ipPort;

        xhr.onreadystatechange = function () {
            if (xhr.readyState === 4 && xhr.status === 200) {
                document.querySelector("#status_text").innerText = "Connection to 'http://" + ipPort + "/' success! Redirecting...";

                if (typeof callback === "function")
                    callback(ipPort);
            }
            else if (xhr.readyState === 4 && xhr.status !== 200) {
                document.querySelector("button").disabled = false;
                document.querySelector("input").disabled = false;
                document.querySelector("#status_text").innerText = "Connection to 'http://" + ipPort + "/' failed!";

                if (typeof errCallback === "function")
                    errCallback(ipPort);
            }
        }

        xhr.open('GET', 'http://' + ipPort + '/');
        xhr.send(null);
    }

    function goUrl(ipPort) {
        setTimeout(function () {
            window.location.href = 'http://' + ipPort + '/'
        }, 1500);
    }

    function ajaxErr(ipPort) {
        document.querySelector("#unavailable p").style.display = "block";
        console.log('Can\'t connect to http://' + ipPort + '/');
    }

<<<<<<< HEAD
</script>


<script src="cordova.js"></script></body></html>
=======
    function onBackKeyDown(e) {
      e.preventDefault();
      e.stopPropagation();
      var $$ = window.app.f7.$;
      if (new Date().getTime() - window.lastTimeBackPress < window.timePeriodToExit) {
        navigator.app.exitApp();
      }
      else if($$('.preloader-modal').length == 0) {
        if ($$('.modal-in').length > 0) {
          window.app.f7.popup.close();
          return false;
        } else if ($$('html').hasClass('with-panel-left-reveal') || $$('body').hasClass('with-panel-right-reveal')) {
          window.app.f7.panel.close();
          return false;
        } else if ($$('.photo-browser-in').length > 0) {
          window.app.f7.photoBrowserClose();
          return false;
        } else if (window.app.f7.view[2].router.url == '/') {
          var toastBottom = window.app.f7.toast.create({
            text: 'Press again to exit',
            closeTimeout: 2000,
          });
          toastBottom.open();
          navigator.vibrate(20)
          window.lastTimeBackPress = new Date().getTime();
        } else {
          window.app.f7.router.back();
        }
        return true;
      }
    };

    document.addEventListener('deviceready', function(evt) {
      //console.log(window.$theme);
      window.backButton = 0;
      window.lastTimeBackPress = 0;
      window.timePeriodToExit = 2000;
      document.addEventListener("backbutton", onBackKeyDown, false);

      var iosSettings = {};
      iosSettings["kOSSettingsKeyAutoPrompt"] = true;
      iosSettings["kOSSettingsKeyInAppLaunchURL"] = false;
      window.open = cordova.InAppBrowser.open;

      var networkState = navigator.connection.type;
      if (networkState == "Connection.NONE") {
        localStorage.setItem("connection", "false");
      } else {
        localStorage.setItem("connection", "true");
      }
      universalLinks.subscribe('openurl', window.didLaunchAppFromLink);
      var notificationOpenedCallback = function(jsonData) {
        //save_notification(jsonData);
        if (jsonData.payload.additionalData.path !== "") {
          window.app.f7.router.navigate(jsonData.payload.additionalData.path)
        }
        //console.log('notificationOpenedCallback: ' + JSON.stringify(jsonData));
      };
      var notificationRecievedCallback = function(jsonData) {
        save_notification(jsonData);
        if (jsonData.isAppInFocus) {
          var not = window.app.f7.notification.create({
            icon: "<img src='static/img/favico.PNG' style='width:20px;height:20px'>",
            title: jsonData.payload.title,
            titleRightText: 'now',
            text: jsonData.payload.body,
            closeOnClick: true,
            closeTimeout: 5000,
            on: {
              close: function() {
                if (jsonData.payload.additionalData.path !== "") {
                  window.app.f7.router.navigate(jsonData.payload.additionalData.path)
                }
              },
            },
          });
          not.open();
          navigator.vibrate(1000);
        }
        //console.log('notificationRecievedCallback: ' + JSON.stringify(jsonData));
      };

      window.plugins.OneSignal
        .startInit("ad630897-aa99-4141-8273-d483016e40a9")
        .handleNotificationOpened(notificationOpenedCallback)
        .handleNotificationReceived(notificationRecievedCallback)
        .inFocusDisplaying(window.plugins.OneSignal.OSInFocusDisplayOption.None)
        .iOSSettings(iosSettings)
        .endInit();

      window.plugins.OneSignal.getPermissionSubscriptionState(function(status) {
        localStorage.setItem('push', status.subscriptionStatus.subscribed)
      });

    }, false);

    document.addEventListener("offline", function onOffline() {
      localStorage.setItem("connection", "false");
      window.app.f7.dialog.alert("No Internet Connection!", "Warning", function() {
        location.reload();
      });
    }, false);

    document.addEventListener("online", function onOnline() {
      if (localStorage.getItem("connection") == "false") {
        localStorage.setItem("connection", "true");
        location.reload();
      }
<<<<<<< HEAD
    }, false);</script><script src=414c0111f77876151226.main.js></script></body></html>
=======
<<<<<<< HEAD
    }, false);</script><script src=9e1afa008102323a7a09.main.js></script></body></html>
=======
    }, false);</script><script src=9f1ba7c43970c342d01d.main.js></script></body></html>
>>>>>>> 2776fd812c09e45938dad531a6467c90666d7dda
>>>>>>> a6b239892b3b5aa0b8a5f25953d685bc94ef897c
>>>>>>> c559b0b557e4b5c9ea20c217e9e20b672b7e70b0
